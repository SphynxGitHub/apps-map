<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Operations Library</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root{
      --bg:#0f1115; --panel:#161a22; --soft:#1d2330; --line:#242c3a; --text:#e8ecf3; --muted:#9aa7bd; --accent:#72a0ff; --ok:#18c38a; --err:#ff5d5d;
      --radius:14px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:var(--bg);color:var(--text);font:14px/1.5 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial}
    a{color:inherit;text-decoration:none}
    .app{display:grid; grid-template-columns: 260px 1fr; height:100%}

    /* Sidebar */
    .sidebar{background:var(--panel); border-right:1px solid var(--line); padding:16px 12px; overflow:auto}
    .brand{font-weight:700; letter-spacing:.4px; margin-bottom:12px}
    .divider{height:1px; background:var(--line); margin:10px 0}
    .menu .group-title{font-size:12px; color:var(--muted); margin:10px 10px 6px}
    .menu a{display:block; padding:8px 10px; border-radius:10px; color:var(--text)}
    .menu a.active{background:var(--soft); color:var(--accent); border:1px solid var(--line)}
    .menu a:hover{background:var(--soft)}

    /* Main */
    .main{display:flex; flex-direction:column; min-width:0; height:100%}
    .topbar{display:flex; gap:10px; align-items:center; justify-content:space-between; padding:10px 16px; border-bottom:1px solid var(--line); background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(0,0,0,0))}
    .crumbs{font-size:12px; color:var(--muted)}
    .content{padding:16px; overflow:auto}

    /* Cards, inputs, buttons */
    .grid{display:grid; gap:12px}
    .grid.cols-2{grid-template-columns: repeat(2, minmax(0,1fr))}
    .grid.cols-3{grid-template-columns: repeat(3, minmax(0,1fr))}
    .card{background:var(--panel); border:1px solid var(--line); border-radius:var(--radius); padding:14px}
    h2{margin:0 0 10px 0; font-size:18px}
    h3{margin:0 0 8px 0; font-size:15px; color:#d7def0}
    .muted{color:var(--muted)}
    label{font-size:12px; color:var(--muted); display:block; margin:0 0 6px}
    input[type=text], input[type=number], textarea, select{
      width:100%; background:#0f131b; color:var(--text); border:1px solid var(--line);
      border-radius:10px; padding:8px 10px; outline:none;
    }
    textarea{min-height:90px}
    .row{display:flex; gap:8px; align-items:center; flex-wrap:wrap}
    .spacer{flex:1}
    .btn{
      background:#1b2332; color:var(--text); border:1px solid var(--line); border-radius:10px;
      padding:8px 12px; cursor:pointer
    }
    .btn.primary{background:var(--accent); color:#0b1021; border-color:transparent; font-weight:600}
    .btn.ghost{background:transparent}
    .btn.small{padding:6px 10px; font-size:12px}
    .pill{display:inline-block; padding:2px 8px; border-radius:999px; background:#0e1523; color:#9CB6FF; border:1px solid #253352; font-size:12px}
    .ok{color:var(--ok)} .err{color:var(--err)}

    table{width:100%; border-collapse:collapse}
    th,td{padding:10px; border-bottom:1px solid var(--line); text-align:left}
    th{color:#c8d3eb; font-weight:600; background:#111623}

    /* Collapsible section */
    .collapse{border:1px solid var(--line); border-radius:12px; overflow:hidden}
    .collapse > .c-head{background:#131a27; padding:10px 12px; cursor:pointer; user-select:none; display:flex; align-items:center; gap:8px}
    .collapse > .c-body{max-height:0; overflow:hidden; transition:max-height .24s ease}
    .collapse.open > .c-body{max-height:1000px}
    .caret{transition: transform .24s ease}
    .collapse.open .caret{transform: rotate(90deg)}

    /* Sticky page header */
    .sticky{ position:sticky; top:0; z-index:2; background:var(--panel); padding-bottom:8px; margin:-14px -14px 14px -14px; border-bottom:1px solid var(--line); border-top-left-radius:var(--radius); border-top-right-radius:var(--radius) }
    .sticky h2{padding:10px 14px}
    .sticky .row{padding:0 14px 10px}
    .notice{font-size:12px; color:var(--muted)}

    /* Apps: cards, icons, modal, slideouts */
    .app-card{
      cursor:pointer;
      transition:transform .08s ease, box-shadow .08s ease, border-color .08s ease;
      padding:10px 12px;
    }
    .app-card:hover{
      transform:translateY(-1px);
      box-shadow:0 8px 22px rgba(0,0,0,.45);
      border-color:var(--accent);
    }
    .app-card .app-title{font-weight:600;font-size:14px}
    .app-icon-box{
      width:42px;height:42px;border-radius:12px;background:#0f131b;
      border:1px solid var(--line);display:flex;align-items:center;justify-content:center;
      flex-shrink:0;position:relative;
    }
    .app-icon-box.small{width:40px;height:40px;border-radius:10px}
    .app-icon-emoji{font-size:20px}
    .app-icon-box img{max-width:100%;max-height:100%;border-radius:10px;display:block}
    .app-icon-card{
      background:var(--panel);border:1px solid var(--line);border-radius:12px;
      padding:10px;display:flex;flex-direction:column;align-items:center;gap:6px;
      cursor:pointer;min-width:100px;max-width:130px;
    }
    .app-icon-card:hover{background:var(--soft);border-color:var(--accent)}
    .app-icon-name{
      font-size:12px;text-align:center;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:100%;
    }
    .small-icon-grid{grid-template-columns:repeat(auto-fill, minmax(110px, 1fr))}
    .seg-group{
      display:inline-flex;border-radius:999px;overflow:hidden;border:1px solid var(--line);background:#0f131b;
    }
    .seg-btn{
      border:none;background:transparent;color:var(--muted);padding:4px 10px;font-size:11px;cursor:pointer;
    }
    .seg-btn.active{background:var(--soft);color:var(--accent)}
    .seg-btn:first-child{border-right:1px solid var(--line)}

    .overlay{
      position:fixed;inset:0;background:rgba(0,0,0,.55);
      display:flex;align-items:center;justify-content:center;z-index:40;
    }
    .app-modal{
      max-width:760px;width:100%;max-height:80vh;overflow:hidden;
      display:flex;flex-direction:column;position:relative;
    }
    .app-modal-header{margin-bottom:4px}
    .app-modal-title-wrap{display:flex;flex-direction:column;gap:2px;min-width:0}
    .editable-title{font-size:16px;font-weight:600;cursor:text;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:360px}
    .app-modal-name-input{font-size:16px;font-weight:600}

    .app-modal .grid.app-sections-grid{margin-top:8px}
    .section-tile{
      border-radius:12px;border:1px solid var(--line);padding:10px;
      cursor:pointer;background:#111623;
      transition:background .1s ease,border-color .1s ease,transform .08s ease;
    }
    .section-tile:hover{
      background:#161c2b;border-color:var(--accent);transform:translateY(-1px);
    }
    .section-title{font-size:13px;font-weight:600;margin-bottom:2px}
    .section-sub{font-size:12px;color:var(--muted)}

    .slideout{
      position:fixed;top:0;right:0;bottom:0;width:420px;
      background:var(--panel);border-left:1px solid var(--line);
      box-shadow:-8px 0 22px rgba(0,0,0,.6);
      display:flex;flex-direction:column;z-index:60;
    }
    .slideout-header{
      padding:10px 14px;border-bottom:1px solid var(--line);
      display:flex;align-items:center;gap:8px;
    }
    .slideout-body{padding:12px 14px;overflow:auto;flex:1}

    .icon-picker{
      position:absolute;top:50px;left:0;background:#0f131b;
      border:1px solid var(--line);border-radius:12px;padding:8px;z-index:70;
      width:230px;box-shadow:0 10px 26px rgba(0,0,0,.6);
    }
    .icon-picker .btn.small{font-size:12px}
  </style>
</head>
<body>
  <div class="app">
    <aside class="sidebar">
      <div class="brand">⚙️ Operations Library</div>
      <div class="divider"></div>

      <nav class="menu" id="nav">
        <div class="group-title">Apps</div>
        <a href="#/apps" data-route>Apps</a>
        <a href="#/apps/functions" data-route>Functions</a>
        <a href="#/apps/tech" data-route>Tech Comparison</a>

        <div class="divider"></div>
        <div class="group-title">Resources</div>
        <a href="#/resources/zaps" data-route>Zaps</a>
        <a href="#/resources/forms" data-route>Forms</a>
        <a href="#/resources/workflows" data-route>Workflows</a>
        <a href="#/resources/scheduling" data-route>Scheduling</a>
        <a href="#/resources/email-campaigns" data-route>Email Campaigns</a>

        <div class="divider"></div>
        <div class="group-title">Settings</div>
        <a href="#/settings/team" data-route>Team</a>
        <a href="#/settings/segments" data-route>Segments</a>
        <a href="#/settings/datapoints" data-route>Datapoints</a>
        <a href="#/settings/folder-hierarchy" data-route>Folder Hierarchy</a>
        <a href="#/settings/naming-conventions" data-route>Naming Conventions</a>
      </nav>
    </aside>

    <main class="main">
      <div class="topbar">
        <div class="crumbs" id="crumbs">/</div>
        <div class="row">
          <button class="btn small" id="exportAll">Export</button>
          <button class="btn small ghost" id="importAll">Import</button>
          <button class="btn small" id="resetAll">Reset</button>
        </div>
      </div>
      <div class="content" id="view"><!-- routed content --></div>
    </main>
  </div>

  <script src="app.js"></script>
</body>
</html>
